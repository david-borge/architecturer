<!-- Comienzo de las etiquetas <html> y <head> -->
@@include('partials/html-and-head-tags-start.html')




	<!-- Page Title, Description & URL canónica -->
    <!-- TODO: cambiar en todas las páginas -->
	<title>${{ contacto.titulo }}$ - ${{ _web.titulo }}$</title>
	<meta name="description" content="${{ contacto.descripcion }}$">
    <link rel="canonical" href="https://192.168.1.33:3000/contacto.html">
    
    
    <!-- Compartir en Redes y WhatsApp (Open Graph protocol): Page Title, Description, URL & Imagen (JPG or PNG with a size less than 300KB and minimum dimensions of 1200 x 630 for Facebook (https://developers.facebook.com/docs/sharing/webmasters/images/#precaching)) -->
    <!-- TODO: cambiar en todas las páginas -->
    <meta property="og:title" content="${{ _web.titulo }}$" />
    <meta property="og:description" content="${{ contacto.descripcion }}$">
    <meta property="og:url" content="https://192.168.1.33:3000/contacto.html" />
    <meta property="og:image" content="https://192.168.1.33:3000/img/logo/NOMBRE-EMPRESA-compartir.jpg">


    <!-- Datos estructurados (schema.org) -->
    <!-- Referencia: https://developers.google.com/search/docs/data-types/article -->
    <!-- TODO: poner en todas las páginas en las que sea necesario. -->
    



    <!-- Extensiones AMP - Importar otras Extensiones AMP aquí -->
    <!-- TODO: quitar las innecesarias. -->
    

    <!-- Extensiones AMP - Formulario -->
    <script async custom-element="amp-script" src="https://cdn.ampproject.org/v0/amp-script-0.1.js"></script>
    <script async custom-element="amp-position-observer" src="https://cdn.ampproject.org/v0/amp-position-observer-0.1.js"></script>
    <script async custom-element="amp-animation" src="https://cdn.ampproject.org/v0/amp-animation-0.1.js"></script>
    <script async custom-element="amp-fx-collection" src="https://cdn.ampproject.org/v0/amp-fx-collection-0.1.js"></script>
    <script async custom-element="amp-sidebar" src="https://cdn.ampproject.org/v0/amp-sidebar-0.1.js"></script>
    
    <script async custom-element="amp-form" src="https://cdn.ampproject.org/v0/amp-form-0.1.js"></script>
    <script async custom-element="amp-recaptcha-input" src="https://cdn.ampproject.org/v0/amp-recaptcha-input-0.1.js"></script>
    <script async custom-template="amp-mustache" src="https://cdn.ampproject.org/v0/amp-mustache-0.2.js"></script>
    


    
    <!-- Head Tag Styles: Iconos + Favicon + CSS de AMP -->
    @@include('partials/iconos.html')
    @@include('partials/favicon.html')
    @@include('partials/css-de-amp.html')

    <!-- build:remove -->
    <!-- Estilos generales (Solo para desarrollo, estos enlaces se quitan en las builds) -->
    <link rel="stylesheet" href="./css/vendor/bootstrap/bootstrap.min.css">
    <link rel="stylesheet" href="./css/partials/header-tag/header-tag.min.css">
    <link rel="stylesheet" href="./css/partials/footer-tag/footer-tag.min.css">
    <link rel="stylesheet" href="./css/partials/fuentes.min.css">
    <link rel="stylesheet" href="./css/main/main.min.css">
    <!--<link rel="stylesheet" href="./css/main-less.min.css">--> <!--No uso LESS en este proyecto. -->
    
    <!-- Estilos de esta página (Solo para desarrollo, estos enlaces se quitan en las builds) -->
    <link rel="stylesheet" href="./css/contacto/contacto.min.css">
    <!-- endbuild -->

    <!-- Estilos de esta página -->
    <!-- Esto se rellenará automáticamente en las builds. -->
    <style amp-custom></style>

    <!-- Google Tag Manager head script -->
    @@include('partials/google-tag-manager-head-script.html')

</head>

<body>

    <!-- Google Tag Manager body tag -->
    @@include('partials/google-tag-manager-body-tag.html')

    <!-- Header tag -->
    @@include('partials/header-tag.html')
    @@include('partials/header-cambiar-en-scroll.html')


    <!-- Contenido principal -->
    <main role="main">

        <div class="container">
            
            <h1>${{ contacto.titulo }}$</h1>

            <!-- Formulario de contacto -->
            <!-- MUY IMPORTANTE: si algún campo no se necesita, dejarlo oculto y rellenando el valor en el HTML. -->
            <!-- CUIDADO: el enlace al archivo PHP que envia el correo, que es el valor del atributo action-xhr, debe empezar por HTTPS. Para tener HTTPS en local, en la configuración de laragon, en la pestaña Generalactivar "Auto-create Virtual Hosts", y en la pestaña "Services & Ports", activar SSL "Enabled". En el navegador, entrar en la ruta marcada por "Hostname template" en la pestaña general: {nombre_de_la_carpeta_de_proyecto_hija_de_www.lo_que_ponga_en_ese_campo_de_la_configuracion_de_laragon} -->
            <!-- AYUDA IMPORTANTE: en el panel "Network" de las herramientas de desarrollo de Chrome se puede ver el resultado del la petición XHR. -->
            <!-- OTROS TIPOS DE CAMPOS: https://amp.dev/documentation/examples/components/amp-form/?format=websites -->
            <!-- Nota: poner el atributo action implica usar HTTP para obtener la respuesta, lo que recarga la página al obtenerla. Mientras que usar el atributo action-xhr, usa XMLHTTPREQUEST, por lo que no se recargar la página al obtener la resupuesta. -->
            <!-- TODO: FIXME: añadir eventos de form (x3) a GTM. Ver: https://amp.dev/documentation/components/amp-form/#analytics -->
            <form id="formulario-contacto" action-xhr="https://192.168.1.33:3000/include/enviar-formulario-contacto.php" method="post" target="_top" autocomplete="off">

                <!-- reCAPTCHA -->
                <!-- Nota: ver la cuenta de Gmail que tiene este reCAPTCHA en el PASO 5.1 de enviar-formulario-contacto.php -->
                <!-- TODO: Poner la clave de sitio web (clave pública) en el atributo data-sitekey -->
                <amp-recaptcha-input
                    layout="nodisplay"
                    name="recaptcha_token"
                    data-sitekey="6LeDKjQdAAAAAFWYsHniUFmt-LPk-dJ8z1vgq-5q"
                    data-action="contactar">
                </amp-recaptcha-input>
                
                <!-- Campos del formulario -->
                <!-- TODO: adaptar los divs con submit-success, submit-error y el archivo enviar-formulario-contacto.php cuando cambien los datos del formulario -->
                <fieldset>
                    
                    <div class="row">
                        <div class="col-12 mb-3">
                            <div class="form-group">
                                <label for="nombre_y_apellidos" class="form-label">Nombre y apellidos</label>
                                <input id="nombre_y_apellidos" name="nombre_y_apellidos" type="text" placeholder="Nombre y apellidos" required class="form-control">
                            </div>
                        </div>
                    </div>

                    <div class="row">
                        <div class="col-md-6 mb-3">
                            <div class="form-group">
                                <label for="correo_electronico" class="form-label">Correo electrónico</label>
                                <input id="correo_electronico" name="correo_electronico" type="email" placeholder="Correo electrónico" required class="form-control">
                            </div>
                        </div>
                        <div class="col-md-6 mb-3">
                            <div class="form-group">
                                <label for="telefono" class="form-label">Teléfono (opcional)</label>
                                <input id="telefono" name="telefono" type="tel" placeholder="Teléfono" class="form-control">
                            </div>
                        </div>
                    </div>

                    <div class="row">
                        <div class="col-12 mb-3">
                            <div class="form-group">
                                <label for="mensaje" class="form-label">Mensaje (opcional)</label>
                                <textarea id="mensaje" name="mensaje" placeholder="¿Cómo podemos ayudarte?" maxlength="4000" autoexpand class="form-control" style="height: 100px; min-height: 100px; max-height: 200px; resize: vertical;"></textarea>
                            </div>
                        </div>
                    </div>

                    <div class="row">
                        <div class="col-12 mb-3">
                            <div class="form-group">
                                <input id="acepto-la-politica-de-proteccion-de-datos" name="acepto-la-politica-de-proteccion-de-datos" type="checkbox" value="acepto" required class="form-check-input">
                                <label for="acepto-la-politica-de-proteccion-de-datos" class="form-label">Acepto la <a href="#" target="_blank" rel="noopener">Política de protección de datos</a>.</label>
                            </div>
                        </div>
                    </div>

                    <div class="row">
                        <div class="col-12">
                            <button type="submit" class="btn btn-primary w-100">Enviar mensaje</button>
                        </div>
                    </div>

                </fieldset>

                <!-- Se muestra cuando el formulario se esté procesando -->
                <div submitting>
                    <p>Enviando...</p>
                </div>

                <!-- Se muestra cuando el formulario se haya enviado con éxito (the response is successful (i.e., has a status of 2XX)) -->
                <div submit-success>
                    <template type="amp-mustache">

                        <p>¡Mensaje enviado correctamente!</p>

                        <!-- TODO: comentar esto en producción -->
                        <div style="border: 1px solid green; padding: 15px;">
                            <p><strong>Datos devueltos en JSON por enviar-formulario-contacto.php:</strong></p>
                            <ul>
                                <li><strong>reCAPTCHA</strong>: {{estado_recaptcha}}</li>
                                <li><strong>Puntuación de reCAPTCHA</strong>: {{puntuacion_recaptcha}}</li>
                                <li><strong>Correo</strong>: {{se_ha_enviado_el_correo}}</li>
                                <li><strong>Nombre y apellidos</strong>: {{nombre_y_apellidos_desde_enviar_formulario_contacto}}</li>
                                <li><strong>Correo electrónico</strong>: {{correo_electronico_desde_enviar_formulario_contacto}}</li>
                                <li><strong>Teléfono</strong>: {{telefono}}</li>
                                <li><strong>Mensaje</strong>: {{mensaje_desde_enviar_formulario_contacto}}</li>
                                <li><strong>Error</strong>: {{error}}</li>
                            </ul>
                        </div>

                    </template>
                </div>

                <!-- Se muestra cuando haya habido un error al procesar el formulario (the response is unsuccessful (i.e., does not have a status of 2XX)) -->
                <div submit-error>
                    <template type="amp-mustache">

                        <p>¡Vaya! Hubo un error al enviar el mensaje, por favor, inténtelo de nuevo.</p>

                        <!-- TODO: comentar esto en producción -->
                        <div style="border: 1px solid red; padding: 15px;">
                            <p><strong>Datos devueltos en JSON por enviar-formulario-contacto.php:</strong></p>
                            <ul>
                                <li><strong>reCAPTCHA</strong>: {{estado_recaptcha}}</li>
                                <li><strong>Puntuación de reCAPTCHA</strong>: {{puntuacion_recaptcha}}</li>
                                <li><strong>Correo</strong>: {{se_ha_enviado_el_correo}}</li>
                                <li><strong>Nombre y apellidos</strong>: {{nombre_y_apellidos_desde_enviar_formulario_contacto}}</li>
                                <li><strong>Correo electrónico</strong>: {{correo_electronico_desde_enviar_formulario_contacto}}</li>
                                <li><strong>Teléfono</strong>: {{telefono}}</li>
                                <li><strong>Mensaje</strong>: {{mensaje_desde_enviar_formulario_contacto}}</li>
                                <li><strong>Error</strong>: {{error}}</li>
                            </ul>
                        </div>

                    </template>
                </div>

            </form>

        </div>
        
        <!-- WhatsApp (FAB) -->
        @@include('partials/fabs/fab-whatsapp.html')

    </main>


    <!-- Footer tag -->
    @@include('partials/footer-tag.html')
    

    <!-- Menú móvil (sidebar) -->
    @@include('partials/sidebars/sidebar-menu-movil.html')


</body>
</html>