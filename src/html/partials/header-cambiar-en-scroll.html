<!-- Div auxiliar para mostrar u ocultar el header transparente y con fondo. (Importante el + 1px del top para que funcione bien.) -->
<!-- NOTA: para hacer comprobaciones, se puede hacer visible este div añadiendole: width: 20px; background: red; -->
<div id="div-auxiliar-mostrar-ocultar-headers" style="position: absolute; top: calc(100vh + 1px); bottom: 0;"></div>

<!-- Mostrar u ocultar el header transparente o con fondo según la visibilidad de #div-auxiliar-mostrar-ocultar-headers. Abajo están las animaciones necesarias. -->
<amp-position-observer target="div-auxiliar-mostrar-ocultar-headers" intersection-ratios="0" on="enter: ocultarHeaderTransparente.start, mostrarHeaderConFondo.start; exit: mostrarHeaderTransparente.start, ocultarHeaderConFondo.start;" layout="nodisplay"></amp-position-observer>

<amp-animation id="ocultarHeaderTransparente" layout="nodisplay">
    <script type="application/json">
        [
            {
                "selector":"#header-transparente",
                "duration":"0.3s",
                "easing":"ease-in",
                "fill":"forwards",
                "iterations":"1",
                "keyframes":[
                    {
                        "opacity":"0",
                        "visibility":"hidden"
                    }
                ]
            }
        ]
    </script>
</amp-animation>

<amp-animation id="mostrarHeaderTransparente" layout="nodisplay">
    <script type="application/json">
        [
            {
                "selector": "#header-transparente",
                "duration": "0.3s",
                "easing": "ease-in",
                "fill": "forwards",
                "iterations": "1",
                "keyframes": [
                    {
                        "opacity": "1",
                        "visibility": "visible"
                    }
                ]
            }
        ]
    </script>
</amp-animation>

<amp-animation id="ocultarHeaderConFondo" layout="nodisplay">
    <script type="application/json">
        [
            {
                "selector": "#header-con-fondo",
                "duration": "0.3s",
                "easing": "ease-in",
                "fill": "forwards",
                "iterations": "1",
                "keyframes": [
                    {
                        "opacity": "0",
                        "visibility": "hidden"
                    }
                ]
            }
        ]
    </script>
</amp-animation>

<amp-animation id="mostrarHeaderConFondo" layout="nodisplay">
    <script type="application/json">
        [
            {
                "selector": "#header-con-fondo",
                "duration": "0.3s",
                "easing": "ease-in",
                "fill": "forwards",
                "iterations": "1",
                "keyframes": [
                    {
                        "opacity": "1",
                        "visibility": "visible"
                    }
                ]
            },
            {
                "selector": "#header-con-fondo",
                "duration": "0s",
                "easing": "ease-in",
                "fill": "forwards",
                "iterations": "1",
                "keyframes": [
                    {
                        "transform": "translateY(-76px)"
                    }
                ]
            }
        ]
    </script>
</amp-animation>